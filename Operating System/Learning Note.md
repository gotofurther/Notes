# 操作系统
------
* 操作系统引论:
    1. 概念: 
        * **操作系统(Operating System, OS)是指控制和管理整个计算机系统的硬件和软件资源, 并合理地组织调度计算机的工作和资源的分配; 以提供给用户和其他软件方便的接口和环境; 它是计算机系统中最基本的系统软件.**
            1. 操作系统是系统资源的管理者
                1. 提供功能:
                    1. 处理机管理
                    2. 存储器管理
                    3. 文件管理
                    4. 设备管理
            2. 操作系统向上层提供方便易用的服务
                1. 直接给用户使用的
                    * GUI(Graphical User Interface, 图形用户界面):用户可以使用形象的图形界面进行操作, 无需记忆复杂的命令与参数
                    * 命令接口
                        * 联机命令接口: 联机命令接口=交互式命令接口(用户说一句, 系统做一句, 例如cmd)
                        * 脱机命令接口: 脱机命令接口=批处理命令接口(用户说一堆, 系统做一堆, 例如.bat文件)
                2. 给软件/程序员使用的
                    * 程序接口(系统调用):在程序中进行系统调用来使用程序接口, 普通用户不能直接使用程序接口, 只能通过程序代码间接调用
            3. 操作系统是最接近硬件的一层软件
                * 没有任何软件支持的计算机称为裸机
                * 通常把覆盖了软件的机器称为扩充机器, 又称之为虚拟机
        > 注: 
        >     一个程序需要放入内存并给它分配CPU才能执行
    2. 操作系统的特征:
        1. 并发: 指多个事件在**同一时间间隔**内发生, 这些事件在宏观上是同时发生的, 微观上是交替发生的.
            * 并行: 指多个事件在**同一时刻**同时发生.
            * 操作系统的并发性是指计算机系统中"同时"运行着多个程序, 这些程序从宏观上看是同时运行着的, 微观上看是交替运行的.
            * 单核CPU同一时刻只能执行一个程序, 各个程序只能并发地执行
            * 多核CPU同一时刻可以同时执行多个程序, 多个程序可以并行地执行
        2. 共享: 即资源共享, 是指系统中的资源可供内存中的多个并发执行的进程共同使用.
            * 互斥共享方式: 计算机中的某些资源, 虽然可以供给多个进程使用, 但一个时间段内只允许一个进程访问该资源.
            * 同时共享方式: 系统中的某些资源, 允许一个时间段内由多个进程"同时"对它们进行访问.("同时"往往是宏观上的, 而在微观上, 这些进程可能是交替地对该资源进行访问的(即分时访问))
        > 注: 
        >    并发性指计算机系统中同时存在着多个运行着的程序
        >    共享性是指系统中的资源可以供内存中多个并发执行的进程共同使用
        3. 虚拟: 是指把物理上的实体变为若干个逻辑上的对应物, 物理实体是实际存在的, 而逻辑上的对应物是用户感受到的.
            * 空分复用技术: 如虚拟存储技术.
            * 时分复用技术: 微观上处理机在各个微小的时间段内交替为各个进程服务, 如虚拟存储器.
        4. 异步: 在多道程序环境下, 允许多个程序并发执行, 但由于资源有限, 进程的执行不是一贯到底的, 而是走走停停, 以不可预知的速度向前推进, 这就是进程的异步性.
    3. 发展与分类:
        1. 手工操作阶段: 操作系统还未诞生
            * 主要缺点: 用户独占全机, 人机速度矛盾导致资源利用率极低.
        2. 批处理阶段(单道批处理系统)
            * 引入脱机输入/输出技术(用外围机+磁带(处理速度远快于纸带机)完成), 并由监督程序(操作系统的雏形)负责作业的输入与输出
            * 主要缺点: 内存中仅能有一道程序运行, 只有该程序结束后才能调入下一道程序, 资源利用率仍然很低.
        3. 批处理阶段(多道程序并发运行): 操作系统正式诞生, 用于支持多道程序并发运行
            * 优点: 多道程序并发执行, 共享计算机资源, 资源利用率大幅提升, CPU和其他资源更能保持"忙碌"状态, 系统吞吐量增大.
            * 缺点: 用户响应时间长, 没有人机交互功能
        4. 分时操作系统
            * 计算机以时间片为单位轮流为各给用户/作业服务, 各个用户可以通过终端与计算机进行交互.
            * 优点: 用户的请求可以被即使响应, 解决了人机交互问题. 允许多个用户同时使用一台计算机, 并且用户对计算机的操作相互独立, 感受不到被人的存在.
            * 缺点: 不能有限处理一些紧急任务, 操作系统对各个用户/作业完全是公平的, 循环的为每一个用户/作业服务一个时间片, 不区分任务的紧急性.
        5. 实时操作系统:
            * 优点: 能够优先响应一些紧急任务, 某些紧急任务不需要时间片排队
            * 在实时操作系统的控制下, 计算机系统接收到外部信号后及时进行处理, 并且要求在严格的时限内处理完事件, 实时操作系统的主要特点是及时性和可靠性.
            * 硬实时系统: 必须在绝对严格的规定时间内完成处理
            * 软实时系统: 能接受偶尔违反时间规定
        * 其他操作系统: 略
    4. 操作系统运行机制:
        * "内核(Kernel)"是操作系统最核心的部分, 也是最接近硬件的的部分.(甚至可以说一个操作系统只要有内核就够了, 例如在Docker中仅需Linux内核就可以实现Lunix全部功能)
            * 内核态: CPU两种状态之一, 说明此时运行的是内核程序, 此时可以执行特权指令.
            * 用户态: CPU两种状态之一, 说明此时运行的是应用程序, 此时只能执行非特权指令.
            * CPU中有一个寄存器位PSW(程序状态字), 其中有个二进制位, 1表示"内核态", 0表示"用户态".
            * 内核态=核心态=管态; 用户态=目态
            * 内核态 -> 用户态: 执行一条特权指令--修改PSW的标志位"用户态", 这个动作意味着操作系统主动让出CPU使用权.
            * 用户态 -> 核心态: 由"中断"引发, 硬件自动完成变态过程, 触发中断信号意味着操作系统强行夺回CPU的使用权力.
        * "指令"就是处理器(CPU)能识别, 执行的最基本命令.
            * 特权指令: 只允许操作系统内核来使用, 如内存清零指令
            * 非特权指令: 例如应用程序只能使用"非特权指令", 如加法指令, 减法指令等
    5. 中断与异常:
        * 中断的作用:
        * 中断的类型:
            * 内中断(异常):
            * 外中断:
        * 中断机制的基本原理:
        
